<canvas id="averageChartOnly" width="400" height="400"></canvas>

<script>
  document.addEventListener("turbo:load", function () {
    const ctx = document.getElementById("averageChartOnly");
    if (!ctx) return;

    if (Chart.getChart(ctx)) {
      Chart.getChart(ctx).destroy();
    }

    const borderWidth = window.innerWidth < 768 ? 2 : 4;

    new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ["甘みの強さ", ["後味のキレ/","スッキリ感"], "自然な甘さ", "爽快感", "甘さの深み/コク"],
        datasets: [{
          label: ["<%= t('defaults.chart.sweetness_average') %>"],
          data: [<%= data.map(&:to_i).join(", ") %>],
          backgroundColor: 'rgba(153, 215, 170, 0.4)',
          borderColor: 'rgba(153, 215, 170, 0.6)',
          borderWidth: borderWidth,
          pointBackgroundColor: 'rgba(153, 215, 170, 0.6)',
          pointRadius: 3,
          pointHoverRadius: 3
        }]
      },
      options: {
        responsive: true,
        scales: {
          r: {
            min: 0,
            max: 5,
            ticks: {
              stepSize: 1
            }
          }
        }
      }
    });
  });
</script>