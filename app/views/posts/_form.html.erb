<div class="flex flex-col justify-center items-center text-center rounded-4xl m-2 sm:m-4">
  <%= form_with model: @post, local: true, class: "p-4 md:p-2 space-y-6" do |f| %>

    <% if @post.errors.any? %>
      <div class="error-messages text-error bg-base-100 p-2 md:p-4 rounded-4xl ring-2 ring-error">
        <ul>
          <% @post.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <% if @post.product.persisted? %>
      <%= render "existing_product_form", f: f %>
    <% else %>
      <%= render "new_product_form", f: f %>
    <% end %>

    <div class="flex justify-center items-center text-base-200 w-full text-sm pt-3">
      <div class="flex items-center gap-5 w-full">
        <div class="flex-1 border-t border-dashed border-stone-400"></div>
          <span class="text-stone-400 text-sm font-medium">
            <%= t('posts.new.reputation_part') %>
          </span>
        <div class="flex-1 border-t border-dashed border-stone-400"></div>
      </div>
    </div>

    <%= render "common_rating_form", f: f %>

    <div class="form-control">
      <%= f.label :review, t('activerecord.attributes.post.review'), class: "label text-neutral mb-2" %>
      <%= f.text_area :review, rows: 3, class: "textarea textarea-bordered w-full bg-white", placeholder: t('posts.form.post_placeholders') %>     
    </div>

    <div class="form-control p-3">
      <%= f.submit f.object.new_record? ? t('helpers.submit.post') : t('helpers.submit.update'),
            class: "text-base btn btn-lg btn-primary" %>
    </div>
  <% end %>

  <%= link_to :back do %>
    <button class="text-base btn"><%= t("defaults.buttons.return") %></button>
  <% end %>
</div>
